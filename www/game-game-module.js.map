{"version":3,"sources":["./src/app/game/game-routing.module.ts","./src/app/game/game.page.ts","./src/app/game/game.page.html","./src/app/game/game.module.ts","./src/app/game/game.page.scss"],"names":[],"mappings":"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","file":"game-game-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { GamePage } from './game.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: GamePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class GamePageRoutingModule {}\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AlertController } from '@ionic/angular';\n\n@Component({\n  selector: 'app-game',\n  templateUrl: './game.page.html',\n  styleUrls: ['./game.page.scss'],\n})\nexport class GamePage implements OnInit {\n  @ViewChild('canvas', { static: true }) gameCanvas;\n  gameContext;\n  background;\n  ground;\n  nghia;\n  pipeNorth;\n  pipeSouth;\n\n  bX;\n  bY;\n  gap;\n  gravity;\n  score;\n  constant;\n\n  flySound;\n  scoreSound;\n  hitSound;\n\n  pipe = [];\n\n  constructor(private route: ActivatedRoute, private router: Router, private alertController: AlertController) { }\n\n  startNewGame() {\n    this.gameContext = this.gameCanvas.nativeElement.getContext(\"2d\");\n\n    this.background = new Image();\n    this.background.src = \"../../assets/images/bg.png\"\n\n    this.ground = new Image();\n    this.ground.src = \"../../assets/images/fg.png\"\n\n    let id = this.route.snapshot.queryParams.fig;\n    this.nghia = new Image();\n    this.nghia.src = \"../../assets/images/nghia\" + id + \"-mit-wings-transparent-fixed.png\";\n\n    this.pipeNorth = new Image();\n    this.pipeNorth.src = \"../../assets/images/pipeNorth.png\";\n\n    this.pipeSouth = new Image();\n    this.pipeSouth.src = \"../../assets/images/pipeSouth.png\";\n\n    this.pipe = [];\n    this.pipe[0] = {\n      x: this.gameCanvas.nativeElement.width,\n      y: 0\n    }\n\n    this.bX = 10;\n    this.bY = 150;\n    this.gap = 90;\n    this.gravity = 1.3;\n    this.score = 0;\n    this.constant = 0;\n    \n    this.setupSounds();\n\n    this.draw();\n  }\n\n  setupSounds() {\n    this.hitSound = new Audio();\n    this.hitSound.src = \"../../assets/sound/hit.mp3\";\n\n    this.flySound = new Audio();\n    this.flySound.src = \"../../assets/sound/fly.mp3\";\n\n    this.scoreSound = new Audio();\n    this.scoreSound.src = \"../../assets/sound/score.mp3\";\n  }\n\n  ngOnInit() {\n    //this.startNewGame();\n    this.setupSounds();\n  }\n\n  ionViewWillEnter() {\n    this.startNewGame();\n  }\n\n  draw() {\n    this.gameContext.drawImage(this.background, 0, 0);\n\n    for (let i = 0; i < this.pipe.length; i++) {\n      this.drawNewPipes(i);\n\n      // detect collisions\n      if (this.bX + this.nghia.width >= this.pipe[i].x && this.bX <= this.pipe[i].x + this.pipeNorth.width && (this.bY <= this.pipe[i].y + this.pipeNorth.height || this.bY + this.nghia.height >= this.pipe[i].y + this.constant) || (this.bY + this.nghia.height >= this.gameCanvas.nativeElement.height - this.ground.height)) {\n        if (this.hitSound) this.hitSound.play();\n        this.flySound = null;\n        this.hitSound = null;\n        this.scoreSound = null;\n        this.presentAlert();\n        return;\n      }\n\n      if (this.pipe[i].x == 5) {\n        this.score++;\n        if (this.scoreSound) this.scoreSound.play();\n      }\n\n    }\n\n    this.gameContext.drawImage(this.ground, 0, this.gameCanvas.nativeElement.height - this.ground.height);\n    this.gameContext.drawImage(this.nghia, this.bX, this.bY);\n\n    this.bY += this.gravity;\n\n    requestAnimationFrame(this.draw.bind(this));\n  }\n\n  moveUp() {\n    this.bY -= 30;\n    if (this.flySound) this.flySound.play();\n  }\n\n  drawNewPipes(i: number) {\n    this.constant = this.pipeNorth.height + this.gap;\n    this.gameContext.drawImage(this.pipeNorth, this.pipe[i].x, this.pipe[i].y);\n    this.gameContext.drawImage(this.pipeSouth, this.pipe[i].x, this.pipe[i].y + this.constant);\n\n    this.pipe[i].x--;\n\n    if (this.pipe[i].x == 45) {\n      this.pipe.push({\n        x: this.gameCanvas.nativeElement.width,\n        y: Math.floor(Math.random() * this.pipeNorth.height) - this.pipeNorth.height\n      });\n    }\n  }\n\n  async presentAlert() {\n    const alert = await this.alertController.create({\n      header: 'Game Over!!!!',\n      message: 'Du hast ' + this.score + (this.score > 1 ? ' Punkte' : ' Punkt'),\n      backdropDismiss: false,\n      buttons: [{\n        text: 'OK',\n        handler: () => {\n          this.router.navigate([\"/\"]);\n        }\n      }]\n    })\n\n    await alert.present();\n  }\n\n}\n","export default \"<ion-content>\\n  <div class=\\\"play-ground\\\" (click)=\\\"moveUp()\\\">\\n    <h3><b><i>Score: {{ score }} </i></b></h3>\\n    <canvas \\n      id=\\\"canvas\\\" \\n      width=\\\"288\\\" \\n      height=\\\"512\\\"\\n      #canvas\\n    >\\n    </canvas>\\n  </div>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { GamePageRoutingModule } from './game-routing.module';\n\nimport { GamePage } from './game.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    GamePageRoutingModule\n  ],\n  declarations: [GamePage]\n})\nexport class GamePageModule {}\n","export default \".play-ground {\\n  text-align: center;\\n  background-color: black;\\n  height: 100%;\\n  padding: 2px 0;\\n}\\n.play-ground h3 {\\n  color: white;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2dhbWUucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksa0JBQUE7RUFDQSx1QkFBQTtFQUNBLFlBQUE7RUFDQSxjQUFBO0FBQ0o7QUFDSTtFQUNJLFlBQUE7QUFDUiIsImZpbGUiOiJnYW1lLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5wbGF5LWdyb3VuZCB7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIGJhY2tncm91bmQtY29sb3I6IGJsYWNrO1xuICAgIGhlaWdodDogMTAwJTtcbiAgICBwYWRkaW5nOiAycHggMDtcblxuICAgIGgzIHtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgIH1cbn1cblxuIl19 */\";"],"sourceRoot":"webpack:///"}